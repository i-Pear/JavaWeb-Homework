<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=0.8, maximum-scale=0.8">
    <script src="static/js/jquery.min.js"></script>
    <script src="static/js/vue.js"></script>
    <script src="static/js/index.js"></script>
    <script src="static/js/utils.js"></script>
    <style type="text/css">
        @import url("https://lib.baomitu.com/element-ui/2.13.2/theme-chalk/index.css");
    </style>
    <script>
        if(getCookie("token")==null){
            alert("请先登录！");
            window.location="/login";
        }else{
            $.ajax({
                type: "get",
                url: "checkToken/",
                async: false,
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                cache: false,
                success: function (data) {
                    if(data["status"]==="invalid"){
                        alert("登陆已过期！");
                        window.location="/login";
                    }
                },
            });
        }

        function GetQueryString(name) {
            var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)");
            var r = window.location.search.substr(1).match(reg);
            if (r != null) return unescape(r[2]);
            return null;
        }

        var chapter_id = queryVariable("chapter");
        var current_problem_imgs = [];
        var chapter_name;
        var problem_count;
        var markedItems = {};
        var problems;
        var answers;
        var current_problem_index = 0;
        var current_problem_id;
        var show_ans = false;

        $.ajax({
            type: "get",
            url: "getChapterInfo/" + chapter_id,
            async: false,
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            cache: false,
            success: function (data) {
                chapter_name = data["chapter_name"];
                problem_count = data["problem_count"];
                markedItems = JSON.parse(data["markedItems"]);
                answers=data["answer"];
                problems=data["problem_ids"];
                current_problem_id=problems[0];
                // if has fixed cursor
                if (GetQueryString("cursor") !== null) {
                    current_problem_id = parseInt(GetQueryString("cursor"));
                    for(let i=0;i<problem_count;i++){
                        if(problems[i]===current_problem_id){
                            current_problem_index=i;
                            break;
                        }
                    }
                }
            }
        });

    </script>
</head>

<body>
<script>
    document.title = "章节练习：" + chapter_name;
</script>
<div id="app">
    <el-container>
        <!------ 网页侧边栏 ------>
        <el-aside id="aside" style="min-width: 200px;margin-top: 60px">
            <el-menu default-active="1"
                     @select="handleSelectAside">
                <el-submenu index="1">
                    <template slot="title">
                        <i class="el-icon-location"></i>
                        <span>高等数学</span>
                    </template>

                    <el-submenu index="第1章">
                        <template slot="title">
                            <span>第1章 极限与连续(523题)</span>
                        </template>
                        <el-menu-item index="1-1">1.1 函数(52题)</el-menu-item>
                        <el-submenu index="1-2">
                            <template slot="title">
                                <span>1.2 数列的极限(15题)</span>
                            </template>
                            <el-menu-item index="1-2-1">1.2.1 数列极限的定义(8题)</el-menu-item>
                            <el-menu-item index="1-2-2">1.2.2 数列极限的性质(7题)</el-menu-item>
                        </el-submenu>
                        <el-submenu index="1-3">
                            <template slot="title">
                                <span>1.3 函数的极限(73题)</span>
                            </template>
                            <el-menu-item index="1-3-1">1.3.1 函数极限的定义(16题)</el-menu-item>
                            <el-menu-item index="1-3-2">1.3.2 函数极限和性质(34题)</el-menu-item>
                            <el-menu-item index="1-3-3">1.3.3 无穷小与无穷大的概念、关系(23题)</el-menu-item>
                        </el-submenu>
                        <el-menu-item index="1-4">1.4 极限的运算法则(60题)</el-menu-item>
                        <el-submenu index="1-5">
                            <template slot="title">
                                <span>1.5 极限的存在准则(53题)</span>
                            </template>
                            <el-menu-item index="1-5-1">1.5.1 夹逼准则(22题)</el-menu-item>
                            <el-menu-item index="1-5-2">1.5.2 单调有界准则(31题)</el-menu-item>
                        </el-submenu>
                        <el-submenu index="1-6">
                            <template slot="title">
                                <span>1.6 两个重要极限(58题)</span>
                            </template>
                            <el-menu-item index="1-6-1">1.6.1 重要极限Ⅰ(28题)</el-menu-item>
                            <el-menu-item index="1-6-2">1.6.2 重要极限Ⅱ(30题)</el-menu-item>
                        </el-submenu>
                        <el-menu-item index="1-7">1.7 无穷小的比较(48题)</el-menu-item>
                        <el-submenu index="1-8">
                            <template slot="title">
                                <span>1.8 函数连续的概念(41题)</span>
                            </template>
                            <el-menu-item index="1-8-1">1.8.1 函数在某一点的连续性(20题)</el-menu-item>
                            <el-menu-item index="1-8-2">1.8.2 函数的左连续与右连续(10题)</el-menu-item>
                            <el-menu-item index="1-8-3">1.8.3 函数在区间上连续(11题)</el-menu-item>
                        </el-submenu>
                        <el-menu-item index="1-9">1.9 函数间断点及其判断(78题)</el-menu-item>
                        <el-menu-item index="1-10">1.10 连续的运算及应用(35题)</el-menu-item>
                        <el-menu-item index="1-11">1.11 闭区间上连续函数的性质(10题)</el-menu-item>
                    </el-submenu>
                    <el-submenu index="第2章">
                        <template slot="title">
                            <span>第2章 导数与微分(396题)</span>
                        </template>
                        <el-submenu index="2-1">
                            <template slot="title">
                                <span>2.1 导数的概念(79题)</span>
                            </template>
                            <el-menu-item index="2-1-1">2.1.1 导数的定义(31题)</el-menu-item>
                            <el-menu-item index="2-1-2">2.1.2 左右导数(19题)</el-menu-item>
                            <el-menu-item index="2-1-3">2.1.3 导数的几何意义(20题)</el-menu-item>
                            <el-menu-item index="2-1-4">2.1.4 函数的可导性与连续性的关系(9题)</el-menu-item>
                        </el-submenu>
                        <el-submenu index="2-2">
                            <template slot="title">
                                <span>2.2 导数的求导法则(84题)</span>
                            </template>
                            <el-menu-item index="2-2-1">2.2.1 反函数的求导法则(13题)</el-menu-item>
                            <el-menu-item index="2-2-2">2.2.2 复合函数的求导法则(49题)</el-menu-item>
                            <el-menu-item index="2-2-3">2.2.3 初等函数的导数(22题)</el-menu-item>
                        </el-submenu>
                        <el-submenu index="2-3">
                            <template slot="title">
                                <span>2.3 高阶导数(77题)</span>
                            </template>
                            <el-menu-item index="2-3-1">2.3.1 二阶导数(40题)</el-menu-item>
                            <el-menu-item index="2-3-2">2.3.2 三阶及三阶以上的导数(37题)</el-menu-item>
                        </el-submenu>
                        <el-submenu index="2-4">
                            <template slot="title">
                                <span>2.4 微分(70题)</span>
                            </template>
                            <el-menu-item index="2-4-1">2.4.1 微分的概念(18题)</el-menu-item>
                            <el-menu-item index="2-4-2">2.4.2 微分形式的不变性(14题)</el-menu-item>
                            <el-menu-item index="2-4-3">2.4.3 微分的运算(4题)</el-menu-item>
                            <el-menu-item index="2-4-4">2.4.4 微分在近似计算中的应用(34题)</el-menu-item>
                        </el-submenu>
                        <el-submenu index="2-5">
                            <template slot="title">
                                <span>2.5 隐函数的导数(39题)</span>
                            </template>
                            <el-menu-item index="2-5-1">2.5.1 隐函数的求导与微分(28题)</el-menu-item>
                            <el-menu-item index="2-5-2">2.5.2 对数求导与微分(11题)</el-menu-item>
                        </el-submenu>
                        <el-menu-item index="2-6">2.6 参数方程确定的函数导数(33题)</el-menu-item>
                        <el-menu-item index="2-7">2.7 相关变化率(14题)</el-menu-item>
                    </el-submenu>
                    <el-submenu index="第3章">
                        <template slot="title">
                            <span>第3章 微分中值定理及导数的应用(411题)</span>
                        </template>
                        <el-submenu index="3-1">
                            <template slot="title">
                                <span>3.1 微分中值定理(70题)</span>
                            </template>
                            <el-menu-item index="3-1-1">3.1.1 Roll定理(23题)</el-menu-item>
                            <el-menu-item index="3-1-2">3.1.2 Lagrange定理(36题)</el-menu-item>
                            <el-menu-item index="3-1-3">3.1.3 Cauchy定理(11题)</el-menu-item>
                        </el-submenu>
                        <el-submenu index="3-2">
                            <template slot="title">
                                <span>3.2 Taylor公式(59题)</span>
                            </template>
                            <el-menu-item index="3-2-1">3.2.1 Taylor公式(14题)</el-menu-item>
                            <el-menu-item index="3-2-2">3.2.2 几个常见的麦克劳林公式(19题)</el-menu-item>
                            <el-menu-item index="3-2-3">3.2.3 泰勒公式的应用(26题)</el-menu-item>
                        </el-submenu>
                        <el-submenu index="3-3">
                            <template slot="title">
                                <span>3.3 洛必达法则(82题)</span>
                            </template>
                            <el-menu-item index="3-3-1">3.3.1 零比零型未定式(53题)</el-menu-item>
                            <el-menu-item index="3-3-2">3.3.2 无穷比无穷型其它未定式(17题)</el-menu-item>
                            <el-menu-item index="3-3-3">3.3.3 其它未定式(12题)</el-menu-item>
                        </el-submenu>
                        <el-submenu index="3-4">
                            <template slot="title">
                                <span>3.4 函数的单调性与极值(60题)</span>
                            </template>
                            <el-menu-item index="3-4-1">3.4.1 函数的单调性(21题)</el-menu-item>
                            <el-menu-item index="3-4-2">3.4.2 函数的极值的定义与存在的必要条件(19题)</el-menu-item>
                            <el-menu-item index="3-4-3">3.4.3 求函数极值(20题)</el-menu-item>
                        </el-submenu>
                        <el-menu-item index="3-5">3.5 函数的最值(28题)</el-menu-item>
                        <el-submenu index="3-6">
                            <template slot="title">
                                <span>3.6 曲线的凹凸性与拐点(63题)</span>
                            </template>
                            <el-menu-item index="3-6-1函数曲线的凹凸性(36题)">3.6.1函数曲线的凹凸性(36题)</el-menu-item>
                            <el-menu-item index="3-6-2函数曲线的拐点(27题)">3.6.2函数曲线的拐点(27题)</el-menu-item>
                        </el-submenu>
                        <el-menu-item index="3-7">3.7 函数图像的描绘(32题)</el-menu-item>
                        <el-submenu index="3-8">
                            <template slot="title">
                                <span>3.8 曲率(17题)</span>
                            </template>
                            <el-menu-item index="3-8-1">3.8.1 函数曲线的弧微分(0题)</el-menu-item>
                            <el-menu-item index="3-8-2">3.8.2 曲率与曲率半径(17题)</el-menu-item>
                        </el-submenu>
                    </el-submenu>
                    <el-submenu index="第4章">
                        <template slot="title">
                            <span>第4章 积分及其应用(528题)</span>
                        </template>
                        <el-submenu index="4-1">
                            <template slot="title">
                                <span>4.1 不定积分(78题)</span>
                            </template>
                            <el-menu-item index="4-1-1">4.1.1 原函数与不定积分的概念(7题)</el-menu-item>
                            <el-menu-item index="4-1-2">4.1.2 第一类换元法（凑微分）(23题)</el-menu-item>
                            <el-menu-item index="4-1-3">4.1.3 第二类换元法(18题)</el-menu-item>
                            <el-menu-item index="4-1-4">4.1.4 分部积分(15题)</el-menu-item>
                            <el-menu-item index="4-1-5">4.1.5 有理函数的积分(15题)</el-menu-item>
                        </el-submenu>
                        <el-submenu index="4-2">
                            <template slot="title">
                                <span>4.2 定积分的概念与性质(90题)</span>
                            </template>
                            <el-menu-item index="4-2-1">4.2.1 定积分的概念(29题)</el-menu-item>
                            <el-menu-item index="4-2-2">4.2.2 定积分的几何意义(12题)</el-menu-item>
                            <el-menu-item index="4-2-3">4.2.3 定积分的性质(49题)</el-menu-item>
                        </el-submenu>
                        <el-submenu index="4-3">
                            <template slot="title">
                                <span>4.3 微积分基本公式(55题)</span>
                            </template>
                            <el-menu-item index="4-3-1">4.3.1 积分上限的函数及其导数(47题)</el-menu-item>
                            <el-menu-item index="4-3-2">4.3.2 牛顿-莱布尼兹公式(8题)</el-menu-item>
                        </el-submenu>
                        <el-submenu index="4-4">
                            <template slot="title">
                                <span>4.4 定积分的计算(89题)</span>
                            </template>
                            <el-menu-item index="4-4-1">4.4.1 第一类换元积分法(41题)</el-menu-item>
                            <el-menu-item index="4-4-2">4.4.2 第二类换元积分法(22题)</el-menu-item>
                            <el-menu-item index="4-4-3">4.4.3 分部积分法(26题)</el-menu-item>
                        </el-submenu>
                        <el-submenu index="4-5">
                            <template slot="title">
                                <span>4.5 反常积分(38题)</span>
                            </template>
                            <el-menu-item index="4-5-1">4.5.1 含无穷积分限的反常积分(20题)</el-menu-item>
                            <el-menu-item index="4-5-2">4.5.2 无界函数的反常积分-瑕积分(18题)</el-menu-item>
                        </el-submenu>
                        <el-submenu index="4-6">
                            <template slot="title">
                                <span>4.6 平面图形的面积(59题)</span>
                            </template>
                            <el-menu-item index="4-6-1">4.6.1 直角坐标系下平面图形的面积(28题)</el-menu-item>
                            <el-menu-item index="4-6-2">4.6.2 极坐标系下平面图形的面积(31题)</el-menu-item>
                        </el-submenu>
                        <el-submenu index="4-7">
                            <template slot="title">
                                <span>4.7 立体的体积(36题)</span>
                            </template>
                            <el-menu-item index="4-7-1">4.7.1 平行截面面积为已知的立体体积(5题)</el-menu-item>
                            <el-menu-item index="4-7-2">4.7.2 旋转体的体积(31题)</el-menu-item>
                        </el-submenu>
                        <el-submenu index="4-8">
                            <template slot="title">
                                <span>4.8 平面曲线弧长的计算(23题)</span>
                            </template>
                            <el-menu-item index="4-8-1">4.8.1 直角坐标系下平面曲线的弧长(11题)</el-menu-item>
                            <el-menu-item index="4-8-2">4.8.2 参数方程情况下平面曲线的弧长(6题)</el-menu-item>
                            <el-menu-item index="4-8-3">4.8.3 极坐标情况下平面曲线的弧长(6题)</el-menu-item>
                        </el-submenu>
                        <el-submenu index="4-9">
                            <template slot="title">
                                <span>4.9 定积分的物理应用(47题)</span>
                            </template>
                            <el-menu-item index="4-9-1">4.9.1 变力沿直线所做的功(26题)</el-menu-item>
                            <el-menu-item index="4-9-2">4.9.2 水压力(16题)</el-menu-item>
                            <el-menu-item index="4-9-3">4.9.3 引力(5题)</el-menu-item>
                        </el-submenu>
                        <el-menu-item index="4-10">4.10 定积分求平均值(13题)</el-menu-item>
                    </el-submenu>
                    <el-submenu index="第5章">
                        <template slot="title">
                            <span>第5章 无穷级数(526题)</span>
                        </template>
                        <el-submenu index="5-1">
                            <template slot="title">
                                <span>5.1 常数项级数的概念和性质(60题)</span>
                            </template>
                            <el-menu-item index="5-1-1">5.1.1 常数项系数的概念(30题)</el-menu-item>
                            <el-menu-item index="5-1-2">5.1.2 收敛级数的基本性质(30题)</el-menu-item>
                        </el-submenu>
                        <el-submenu index="5-2">
                            <template slot="title">
                                <span>5.2 正项级数的审敛法(144题)</span>
                            </template>
                            <el-menu-item index="5-2-1">5.2.1 比较判别法(50题)</el-menu-item>
                            <el-menu-item index="5-2-2">5.2.2 比值判别法(34题)</el-menu-item>
                            <el-menu-item index="5-2-3">5.2.3 根植判别法(50题)</el-menu-item>
                            <el-menu-item index="5-2-4">5.2.4 积分审敛法(10题)</el-menu-item>
                        </el-submenu>
                        <el-submenu index="5-3">
                            <template slot="title">
                                <span>5.3 一般常数项级数(75题)</span>
                            </template>
                            <el-menu-item index="5-3-1">5.3.1 交错级数的收敛性(26题)</el-menu-item>
                            <el-menu-item index="5-3-2">5.3.2 绝对收敛与条件收敛(49题)</el-menu-item>
                        </el-submenu>
                        <el-submenu index="5-4">
                            <template slot="title">
                                <span>5.4 幂级数(92题)</span>
                            </template>
                            <el-menu-item index="5-4-1">5.4.1 幂级数及收敛域(65题)</el-menu-item>
                            <el-menu-item index="5-4-2">5.4.2 幂级数的运算(27题)</el-menu-item>
                        </el-submenu>
                        <el-submenu index="5-5">
                            <template slot="title">
                                <span>5.5 函数展开成幂级数(70题)</span>
                            </template>
                            <el-menu-item index="5-5-1">5.5.1 泰勒级数的概念(0题)</el-menu-item>
                            <el-menu-item index="5-5-2">5.5.2 函数展开成幂级数(61题)</el-menu-item>
                            <el-menu-item index="5-5-3">5.5.3 函数幂级数展开式的应用(9题)</el-menu-item>
                        </el-submenu>
                        <el-submenu index="5-6">
                            <template slot="title">
                                <span>5.6 Fourier级数(85题)</span>
                            </template>
                            <el-menu-item index="5-6-1">5.6.1 狄利克雷收敛定理(30题)</el-menu-item>
                            <el-menu-item index="5-6-2">5.6.2 函数展开成Fourier级数(18题)</el-menu-item>
                            <el-menu-item index="5-6-3">5.6.3 正弦级数与余弦级数(4题)</el-menu-item>
                            <el-menu-item index="5-6-4">5.6.4 周期延拓、奇延拓与偶延拓(33题)</el-menu-item>
                        </el-submenu>
                    </el-submenu>
                    <el-submenu index="第6章">
                        <template slot="title">
                            <span>第6章 向量代数与空间解析几何(278题)</span>
                        </template>
                        <el-menu-item index="6-1">6.1 向量及其线性运算(14题)</el-menu-item>
                        <el-submenu index="6-2">
                            <template slot="title">
                                <span>6.2 数量积、向量积和混合积(81题)</span>
                            </template>
                            <el-menu-item index="6-2-1">6.2.1 数量积(39题)</el-menu-item>
                            <el-menu-item index="6-2-2">6.2.2 向量积(29题)</el-menu-item>
                            <el-menu-item index="6-2-3">6.2.3 混合积(13题)</el-menu-item>
                        </el-submenu>
                        <el-submenu index="6-3">
                            <template slot="title">
                                <span>6.3 平面及其方程(57题)</span>
                            </template>
                            <el-menu-item index="6-3-1">6.3.1 平面方程(33题)</el-menu-item>
                            <el-menu-item index="6-3-2">6.3.2 两平面间的夹角(18题)</el-menu-item>
                            <el-menu-item index="6-3-3">6.3.3 点到平面间的距离(6题)</el-menu-item>
                        </el-submenu>
                        <el-submenu index="6-4">
                            <template slot="title">
                                <span>6.4 空间直线及其方程(80题)</span>
                            </template>
                            <el-menu-item index="6-4-1">6.4.1 直线方程(47题)</el-menu-item>
                            <el-menu-item index="6-4-2">6.4.2 直线与直线，直线与平面的位置关系(33题)</el-menu-item>
                        </el-submenu>
                        <el-menu-item index="6-5">6.5 曲面及其方程(14题)</el-menu-item>
                        <el-menu-item index="6-6">6.6 空间曲线及其方程(14题)</el-menu-item>
                        <el-menu-item index="6-7">6.7 二次曲面的类型(18题)</el-menu-item>
                    </el-submenu>
                    <el-submenu index="第7章">
                        <template slot="title">
                            <span>第7章 多元函数微分法及其应用(398题)</span>
                        </template>
                        <el-menu-item index="7-1">7.1 多元函数、多元函数的极限与连续(30题)</el-menu-item>
                        <el-submenu index="7-2">
                            <template slot="title">
                                <span>7.2 偏导数(81题)</span>
                            </template>
                            <el-menu-item index="7-2-1">7.2.1 偏导数的定义及其计算(55题)</el-menu-item>
                            <el-menu-item index="7-2-2">7.2.2 高阶偏导数(26题)</el-menu-item>
                        </el-submenu>
                        <el-submenu index="7-3">
                            <template slot="title">
                                <span>7.3 全微分(28题)</span>
                            </template>
                            <el-menu-item index="7-3-1">7.3.1 全微分的概念与计算(8题)</el-menu-item>
                            <el-menu-item index="7-3-2">7.3.2 全微分的充分条件和必要条件(17题)</el-menu-item>
                            <el-menu-item index="7-3-3">7.3.3 全微分在近似计算中的应用(3题)</el-menu-item>
                        </el-submenu>
                        <el-submenu index="7-4">
                            <template slot="title">
                                <span>7.4 多元复合函数求导法(56题)</span>
                            </template>
                            <el-menu-item index="7-4-1">7.4.1 复合函数的中间变量为一元函数情形(7题)</el-menu-item>
                            <el-menu-item index="7-4-2">7.4.2 复合函数中间变量为多元函数情形(43题)</el-menu-item>
                            <el-menu-item index="7-4-3">7.4.3 复合函数的中间变量既有一元又有多元函数情形(6题)</el-menu-item>
                        </el-submenu>
                        <el-submenu index="7-5">
                            <template slot="title">
                                <span>7.5 隐函数的求导法(59题)</span>
                            </template>
                            <el-menu-item index="7-5-1">7.5.1 一个方程情形(48题)</el-menu-item>
                            <el-menu-item index="7-5-2">7.5.2 方程组的情形(11题)</el-menu-item>
                        </el-submenu>
                        <el-submenu index="7-6">
                            <template slot="title">
                                <span>7.6 多元函数微分法在几何上的应用(70题)</span>
                            </template>
                            <el-menu-item index="7-6-1">7.6.1 空间曲线的切线与法平面(34题)</el-menu-item>
                            <el-menu-item index="7-6-2">7.6.2 空间曲面的切平面与法线(36题)</el-menu-item>
                        </el-submenu>
                        <el-menu-item index="7-7">7.7 梯度与方向导数(34题)</el-menu-item>
                        <el-submenu index="7-8">
                            <template slot="title">
                                <span>7.8 多元函数的极值(40题)</span>
                            </template>
                            <el-menu-item index="7-8-1">7.8.1 二元函数极值存在的充分条件和必要条件(23题)</el-menu-item>
                            <el-menu-item index="7-8-2">7.8.2 条件极值、最大值和最小值(17题)</el-menu-item>
                        </el-submenu>
                    </el-submenu>
                    <el-submenu index="第8章">
                        <template slot="title">
                            <span>第8章 重积分(304题)</span>
                        </template>
                        <el-submenu index="8-1">
                            <template slot="title">
                                <span>8.1 二重积分(178题)</span>
                            </template>
                            <el-menu-item index="8-1-1">8.1.1 二重积分的概念及性质(28题)</el-menu-item>
                            <el-menu-item index="8-1-2">8.1.2 直角坐标系下二重积分的计算(38题)</el-menu-item>
                            <el-menu-item index="8-1-3">8.1.3 利用极坐标计算二重积分(26题)</el-menu-item>
                            <el-menu-item index="8-1-4">8.1.4 二重积分的积分次序(40题)</el-menu-item>
                            <el-menu-item index="8-1-5">8.1.5 二重积分的应用(46题)</el-menu-item>
                        </el-submenu>
                        <el-submenu index="8-2">
                            <template slot="title">
                                <span>8.2 三重积分及其计算(126题)</span>
                            </template>
                            <el-menu-item index="8-2-1">8.2.1 三重积分的概念及性质(16题)</el-menu-item>
                            <el-menu-item index="8-2-2">8.2.2 三重积分在直角坐标系下的计算(27题)</el-menu-item>
                            <el-menu-item index="8-2-3">8.2.3 利用柱面坐标计算三重积分(21题)</el-menu-item>
                            <el-menu-item index="8-2-4">8.2.4 用球面坐标计算三重积分(47题)</el-menu-item>
                            <el-menu-item index="8-2-5">8.2.5 三重积分的应用(15题)</el-menu-item>
                        </el-submenu>
                    </el-submenu>
                    <el-submenu index="第9章">
                        <template slot="title">
                            <span>第9章 曲线积分与曲面积分(414题)</span>
                        </template>
                        <el-submenu index="9-1">
                            <template slot="title">
                                <span>9.1 第一类曲线积分(60题)</span>
                            </template>
                            <el-menu-item index="9-1-1">9.1.1 第一类曲线积分的概念及性质(5题)</el-menu-item>
                            <el-menu-item index="9-1-2">9.1.2 第一类曲线积分的计算(55题)</el-menu-item>
                        </el-submenu>
                        <el-submenu index="9-2">
                            <template slot="title">
                                <span>9.2 第一类曲面积分(74题)</span>
                            </template>
                            <el-menu-item index="9-2-1">9.2.1 第一类曲面积分的概念及性质(0题)</el-menu-item>
                            <el-menu-item index="9-2-2">9.2.2 第一类曲面积分的计算(74题)</el-menu-item>
                        </el-submenu>
                        <el-submenu index="9-3">
                            <template slot="title">
                                <span>9.3 第二类曲线积分(75题)</span>
                            </template>
                            <el-menu-item index="9-3-1">9.3.1 第二类曲线积分的概念及性质(21题)</el-menu-item>
                            <el-menu-item index="9-3-2">9.3.2 第二类曲线的计算(50题)</el-menu-item>
                            <el-menu-item index="9-3-3">9.3.3 两类曲线积分之间的关系(4题)</el-menu-item>
                        </el-submenu>
                        <el-submenu index="9-4">
                            <template slot="title">
                                <span>9.4 第二类曲面积分(45题)</span>
                            </template>
                            <el-menu-item index="9-4-1">9.4.1 第二类曲面积分的概念及性质(17题)</el-menu-item>
                            <el-menu-item index="9-4-2">9.4.2 第二类曲面积分的计算(6题)</el-menu-item>
                            <el-menu-item index="9-4-3">9.4.3 两类曲面积分之间的关系(22题)</el-menu-item>
                        </el-submenu>
                        <el-menu-item index="9-5">9.5 曲线积分和曲面积分的应用(18题)</el-menu-item>
                        <el-submenu index="9-6">
                            <template slot="title">
                                <span>9.6 格林公式及其应用(82题)</span>
                            </template>
                            <el-menu-item index="9-6-1">9.6.1 格林公式(41题)</el-menu-item>
                            <el-menu-item index="9-6-2">9.6.2 平面曲线积分与路径无关(41题)</el-menu-item>
                        </el-submenu>
                        <el-submenu index="9-7">
                            <template slot="title">
                                <span>9.7 高斯公式、通量与散度(33题)</span>
                            </template>
                            <el-menu-item index="9-7-1">9.7.1 高斯公式(21题)</el-menu-item>
                            <el-menu-item index="9-7-2">9.7.2 通量和散度(12题)</el-menu-item>
                        </el-submenu>
                        <el-submenu index="9-8">
                            <template slot="title">
                                <span>9.8 斯托克斯公式、环流量与旋度(27题)</span>
                            </template>
                            <el-menu-item index="9-8-1">9.8.1 斯托克斯公式(15题)</el-menu-item>
                            <el-menu-item index="9-8-2">9.8.2 环流量与旋度(12题)</el-menu-item>
                        </el-submenu>
                    </el-submenu>
                    <el-submenu index="第10章">
                        <template slot="title">
                            <span>第10章 微分方程(380题)</span>
                        </template>
                        <el-menu-item index="10-1">10.1 微分方程的基本概念(15题)</el-menu-item>
                        <el-submenu index="10-2">
                            <template slot="title">
                                <span>10.2 可变离变量型的微分方程(51题)</span>
                            </template>
                            <el-menu-item index="10-2-1">10.2.1 可分离变量型的微分方程(32题)</el-menu-item>
                            <el-menu-item index="10-2-2">10.2.2 齐次方程(19题)</el-menu-item>
                        </el-submenu>
                        <el-submenu index="10-3">
                            <template slot="title">
                                <span>10.3 一阶线性微分方程(53题)</span>
                            </template>
                            <el-menu-item index="10-3-1">10.3.1 一阶线性微分方程(35题)</el-menu-item>
                            <el-menu-item index="10-3-2">10.3.2 伯努利方程(18题)</el-menu-item>
                        </el-submenu>
                        <el-submenu index="10-4">
                            <template slot="title">
                                <span>10.4 全微分方程(51题)</span>
                            </template>
                            <el-menu-item index="10-4-1">10.4.1 全微分方程(19题)</el-menu-item>
                            <el-menu-item index="10-4-2">10.4.2 可化为全微分方程的方程(32题)</el-menu-item>
                        </el-submenu>
                        <el-submenu index="10-5">
                            <template slot="title">
                                <span>10.5 可降阶的二阶微分方程(59题)</span>
                            </template>
                            <el-menu-item index="10-5-1">10.5.1  y”=f(x)型(22题)</el-menu-item>
                            <el-menu-item index="10-5-2">10.5.2  y”= f (x，y’)型(26题)</el-menu-item>
                            <el-menu-item index="10-5-3">10.5.3  y”=f(y，y’)型(11题)</el-menu-item>
                        </el-submenu>
                        <el-submenu index="10-6">
                            <template slot="title">
                                <span>10.6 二阶常系数微分方程(95题)</span>
                            </template>
                            <el-menu-item index="10-6-1">10.6.1 二阶线性微分方程的结构(9题)</el-menu-item>
                            <el-menu-item index="10-6-2">10.6.2 二阶常系数齐次线性微分方程(63题)</el-menu-item>
                            <el-menu-item index="10-6-3">10.6.3 二阶常系数线性非齐次微分方程(23题)</el-menu-item>
                        </el-submenu>
                        <el-menu-item index="10-7">10.7 微分方程的应用(56题)</el-menu-item>
                    </el-submenu>


                </el-submenu>
                <el-menu-item index="-">
                    <i class="el-icon-menu"></i>
                    <span slot="title">线性代数</span>
                </el-menu-item>
                <el-menu-item index="--">
                    <i class="el-icon-document"></i>
                    <span slot="title">概率统计</span>
                </el-menu-item>
                <el-menu-item index="---">
                    <i class="el-icon-setting"></i>
                    <span slot="title">复变函数</span>
                </el-menu-item>
            </el-menu>
        </el-aside>
        <el-container>
            <!------ 网页导航栏 ------>
            <el-header>
                <div style="float: right">
                    <el-menu class="el-menu-demo" mode="horizontal"
                             @select="handleSelect">
                        <el-menu-item index="1">首页</el-menu-item>
                        <el-submenu index="2">
                            <template slot="title">章节练习</template>
                            <el-menu-item index="2-1">高等数学</el-menu-item>
                            <el-menu-item index="2-2">复变函数</el-menu-item>
                            <el-menu-item index="2-3">线性代数</el-menu-item>
                            <el-menu-item index="2-4">概率统计</el-menu-item>
                        </el-submenu>
                        <el-menu-item index="3">练习记录</el-menu-item>
                        <el-menu-item index="4">下载客户端</el-menu-item>
                        <el-menu-item index="5">关于我们</el-menu-item>
                        <el-avatar
                                style="margin: 10px"
                                src="static/img/user-icon.png">
                        </el-avatar>
                    </el-menu>
                </div>
            </el-header>
            <!------ 网页页头 ------>
            <el-page-header @back="goBack" content="题目练习"
                            style="padding-bottom: 20px;padding-left: 20px"></el-page-header>
            <div style="text-align: center;margin-top: 20px">
                <el-progress :text-inside="true" :stroke-width="26" :percentage="percentage"
                             style="margin-left: 10%;margin-right: 10%;margin-bottom: 20px;margin-top: 20px"></el-progress>
                <br><br>
                <el-button type="primary" @click="lastProblem">上一题</el-button>
                <el-button style="margin-left: 200px;margin-right: 200px;" type="primary" @click="nextProblem">下一题
                </el-button>
                <el-button style="margin-right: 200px;" id="switchAns" type="primary" @click="switchAns">显示答案
                </el-button>
                <el-button type="danger" id="fav_button" @click="favourite">收藏此题</el-button>
            </div>
            <div style="margin: 70px;height: 500px">
                <center>
                    <!------ 练习模块部分 ------>
                    <img id="statement"/>
                    <br>
                    <img id="c1" onclick="checkAnswer(1)" style="padding-top: 40px;padding-right: 80px;"/>
                    <img id="c2" onclick="checkAnswer(2)" style="padding-top: 40px;padding-left: 80px;"/>
                    <br><br>
                    <img id="c3" onclick="checkAnswer(3)" style="padding: 10px;padding-right: 80px;"/>
                    <img id="c4" onclick="checkAnswer(4)" style="padding: 10px;padding-left: 80px;"/>
                    <br>
                    <div id="answer" style="display: none">
                        <img id="c5"/>
                    </div>
                </center>
            </div>
        </el-container>
    </el-container>
    <!------ 网页页脚 ------>
    <el-footer style="padding: 0">
        <div style="background-color: black;text-align: center;font-size: small;color: white;padding: 15px 0;margin: 0">
            <p>
                东北大学数学题库练习系统 Powered by Vue, jQuery, Elements, Spring Boot<br/>
                Designed by @i.Pear, 2020.10.31
            </p>
            <p>
                <a href="http://beian.miit.gov.cn/">辽ICP备2021003455号</a>
            </p>
        </div>
    </el-footer>
</div>
<script>
    var Main = {
        data() {
            return {
                value: true,
                fit: "contain",
                percentage: Math.ceil(current_problem_index / problem_count * 100),
            };
        },
        mounted:function (){
            window.checkAnswer=this.checkAnswer;
        },
        methods: {
            checkAnswer(answer){
                if(answer===answers[current_problem_index]){
                    this.$notify.success({
                        title: '提示',
                        message: 'Correct!'
                    });
                }else{
                    this.$notify.error({
                        title: '提示',
                        message: 'Wrong!'
                    });
                }
            },
            handleSelectAside(key, keyPath) {
                if (key[0]==='-') {
                    this.$notify.success({
                        title: '提示',
                        message: '本题库尚未开放'
                    });
                }else{
                    window.location = "/train?chapter=" + key;
                }
            },
            handleSelect(key, keyPath) {
                if (key === "1") {
                    window.location = "/";
                } else if (key === "2-1") {
                    window.location = "/train?chapter=1-1";
                } else if (key === "2-2") {
                    this.$notify.success({
                        title: '提示',
                        message: '本题库尚未开放'
                    });
                } else if (key === "2-3") {
                    this.$notify.success({
                        title: '提示',
                        message: '本题库尚未开放'
                    });
                } else if (key === "2-4") {
                    this.$notify.success({
                        title: '提示',
                        message: '本题库尚未开放'
                    });
                } else if (key === "3") {
                    window.location = "/history";
                } else if (key === "4") {
                    window.location = "/app";
                } else if (key === "5") {
                    window.location = "/about";
                }
            },
            goBack() {
                this.$notify.info({
                    title: '请求返回',
                    message: '请求返回：'
                });
                window.location = "/";
            },
            favourite() {
                if ($("#fav_button").text() === "收藏此题") {
                    // not being favoured
                    $("#fav_button").text("取消收藏");
                    markedItems[String(chapter_id)+":"+String(current_problem_id)] = true;
                } else {
                    // has been favoured
                    $("#fav_button").text("收藏此题");
                    delete markedItems[String(chapter_id)+":"+String(current_problem_id)];
                    console.log(markedItems);
                }
                this.$notify.success({
                    title: '题目收藏信息变更',
                    message: "用户数据库已修改",
                });
                // update database
                $.ajax({
                    type: "post",
                    url: "updateExerciseRecord/",
                    async: false,
                    data: JSON.stringify(markedItems),
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    cache: false,
                    success: function (data) {
                        this.$notify.success({
                            title: '题目收藏信息变更',
                            message: "此处修改用户数据库",
                        });
                    }
                });
            },
            update_view() {
                current_problem_id=problems[current_problem_index];
                $.ajax({
                    type: "get",
                    url: "getProblemImage/"+String(current_problem_id),
                    async: false,
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    cache: false,
                    success: function (data) {
                        current_problem_imgs=data;
                    }
                });

                document.getElementById("statement").src = "data:image/png;base64,"+current_problem_imgs[0];
                document.getElementById("c1").src = "data:image/png;base64,"+current_problem_imgs[1];
                document.getElementById("c2").src = "data:image/png;base64,"+current_problem_imgs[2];
                document.getElementById("c3").src = "data:image/png;base64,"+current_problem_imgs[3];
                document.getElementById("c4").src = "data:image/png;base64,"+current_problem_imgs[4];
                document.getElementById("c5").src = "data:image/png;base64,"+current_problem_imgs[5];

                this.percentage = Math.ceil(current_problem_index / problem_count * 100);

                if (markedItems[chapter_id + ":" + String(current_problem_id)]) {
                    $("#fav_button").text("取消收藏");
                } else {
                    $("#fav_button").text("收藏此题");
                }
            },
            nextProblem() {
                if (current_problem_index === problem_count) return;
                current_problem_index++;
                this.update_view();
            },
            lastProblem() {
                if (current_problem_index === 0) return;
                current_problem_index--;
                this.update_view();
            },
            showAns() {
                document.getElementById("answer").style.display = "inline";
                document.getElementById("switchAns").innerText = "隐藏答案";
                show_ans = true;
            },
            hideAns() {
                document.getElementById("answer").style.display = "none";
                document.getElementById("switchAns").innerText = "显示答案";
                show_ans = false;
            },
            switchAns() {
                if (show_ans) this.hideAns();
                else this.showAns();
            },
        }
    };
    var Ctor = Vue.extend(Main);
    new Ctor().$mount('#app');

    // adjust aside weight
    document.getElementById("aside").style="min-width: 200px; margin-top: 60px";

    // init image urls
    $.ajax({
        type: "get",
        url: "getProblemImage/"+String(current_problem_id),
        async: false,
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        cache: false,
        success: function (data) {
            current_problem_imgs=data;
        }
    });
    document.getElementById("statement").src = "data:image/png;base64,"+current_problem_imgs[0];
    document.getElementById("c1").src = "data:image/png;base64,"+current_problem_imgs[1];
    document.getElementById("c2").src = "data:image/png;base64,"+current_problem_imgs[2];
    document.getElementById("c3").src = "data:image/png;base64,"+current_problem_imgs[3];
    document.getElementById("c4").src = "data:image/png;base64,"+current_problem_imgs[4];
    document.getElementById("c5").src = "data:image/png;base64,"+current_problem_imgs[5];

    this.percentage = Math.ceil(current_problem_index / problem_count * 100);

    if (markedItems[chapter_id + ":" + String(current_problem_id)]) {
        $("#fav_button").text("取消收藏");
    } else {
        $("#fav_button").text("收藏此题");
    }
</script>
</body>
</html>